html
    head
        meta(charset="utf-8")
        meta(name="description" content="A simple maze editor")
        meta(name="viewport" content="width=device-width")
        
        title Maze Runner Component Test
        
        // TODO - Stylesheets within app directory
        link(rel="stylesheet" href="../../../../css/main.css")
        link(rel="stylesheet" href="../../../css/maze_runner.css")

    body
        
        header
            h1 Maze Runner
            
            a(href="../../") Back to List
            
        main
            section#maze
                maze-runner(
                    data-name= maze.name
                    data-map= JSON.stringify(maze.map)
                    data-starting-x= maze.start.x
                    data-starting-z= maze.start.z
                    data-starting-direction= maze.start.direction
                    data-destination-x= maze.destination.x
                    data-destination-z= maze.destination.z
                    )#maze-runner
        footer
        
        // JavaScript    
        script(type="module" src="../../../js/maze_runner.js")

        // Shaders
        script(type="x-shader/x-vertex")#vertexShader
            | varying vec3 vWorldPosition;
            | void main() {
            |     vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
            |     vWorldPosition = worldPosition.xyz;
            |     gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
            | }
            
        script(type="x-shader/x-fragment")#fragmentShader
            | uniform vec3 topColor;
            | uniform vec3 bottomColor;
            | uniform float offset;
            | uniform float exponent;
            | varying vec3 vWorldPosition;
            | void main() {
            |     float h = normalize( vWorldPosition + offset ).y;
            |     gl_FragColor = vec4( mix( bottomColor, topColor, max( pow( max( h , 0.0), exponent ), 0.0 ) ), 1.0 );
            | }
        
        script
            | const el = document.getElementById('maze-runner');
            | el.addEventListener('play', () => {
            |     console.log('You are now playing!');
            | });
            |
            | el.addEventListener('win', () => {
            |     console.log('That is it! You are done!');
            | });
